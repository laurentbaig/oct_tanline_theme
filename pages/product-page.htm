title = "Product-page"
url = "/product-page/:slug"
layout = "default"
is_hidden = 0

[Breadcrumbs]

[ProductItem]
slug = "{{ :slug }}"
==
{# Get product item #}
{% set obProduct = ProductItem.get() %}
<div class="w-11/12 mx-auto">
    {# Hide breadcrumbs #}
    {#
    {% set arBreadcrumbs = Breadcrumbs.getFromProduct(obProduct) %}

    {% if arBreadcrumbs is not empty %}
    <ul>
	<li class="inline-block"><a href="{{ 'shop'|page }}">Shop</a> >> </li>
	{% for arItem in arBreadcrumbs %}
	<li class="inline-block" data-id="{{ arItem.id }}" class="{% if arItem.active %} _active {% endif %}">
	    {% if not loop.last %}
	    <a href="{{ 'category-page'|page({slug: arItem.slug}) }}">{{ arItem.name }}</a>
	    >>
	    {% else %}
	    {{ arItem.name }}
	    {% endif %}
	</li>
	{% endfor %}
    </ul>
    {% endif %}
    #}

    <div class="container flex flex-wrap" data-id="{{ obProduct.id }}"> 

	<div class="product-panel">
	    {% if obProduct.preview_image is not empty %}
	    <img class="w-full" src="{{ obProduct.preview_image.path }}" title="{{ obProduct.preview_image.title }}""
		 alt="{{ obProduct.preview_image.description }}">
	    {% endif %}
	</div>
	<div class="product-panel px-8" data-itemid="{{ obProduct.id }}">
	    <h1 class="uppercase text-xl"> {{ obProduct.name }}</h1>
	    {% for property in obProduct.properties %}
	    <label>{{ property.name }}</label>
	    <div class="form-control">
		<select class="property-option">
		    {% for option in property.options %}
		    <option value="{{ option.id }}">{{ option.name }}</option>
		    {% endfor %}
		</select>
	    </div>
	    {% endfor %}
	    <div class="product-price">$ {{ obProduct.price|number_format(2) }}</div>
	    <div class="pb-4">
	    {% if obProduct.currentDiscounts|length > 0 %}
	    {% for discount in obProduct.currentDiscounts %}
		<small>
		$ {{ discount.amountOff|number_format(2) }} off until {{ discount.until|date('Y-m-d') }}
		</small><br>
	    {% endfor %}
	    {% endif %}
	    </div>
	    
	    <div class="product-description">{{ obProduct.description|raw }}</div>
	    <div class="py-4"></div>

	    <label>Quantity</label>
	    <div class="form-control w-50">
		<input type="number" value="1">
	    </div>
	    <div class="py-1"></div>
	    <button data-action="add-to-cart" data-productid="{{ obProduct.id }}" class="px-8 py-4">Add to Cart</button>
	    
	    <div class="py-4">
		<h4>Categories</h4>
		{% set cat = obProduct.category %}
		<a href="{{ 'category-page'|page({slug: cat.slug }) }}">{{ cat.name }}</a>
		{% for cat in obProduct.other_categories %}
		<div>
		    <a href="{{ 'category-page'|page({slug: cat.slug }) }}">{{ cat.name }}</a>
		</div>
		{% endfor %}
	    </div>
	</div>
	
    </div>
</div>
